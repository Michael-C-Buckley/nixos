watch_file shell.nix

if [[ "$(uname)" == "Darwin" || "$(uname -n)" == "alpine" ]]; then
  # Mac uses Determinate, so use the local flake devShell
  # I want to have Alpine also use my flake
  watch_file modules/outputs/devShells.nix
  use flake
elif [[ "$(uname)" == "Linux" ]]; then
  # I keep my local flake registry mirrored to my flake inputs, so a traditional shell works
  # These are NixOS systems of mine where the registry matches the nixpkgs input
  use nix
fi 